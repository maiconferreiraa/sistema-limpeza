<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <style>
        body { font-family: sans-serif; padding: 20px; color: #333; }
        .header { border-bottom: 2px solid #0d6efd; padding-bottom: 10px; margin-bottom: 20px; position: relative; }
        .logo { max-height: 70px; }
        .orcamento-id { position: absolute; top: 0; right: 0; text-align: right; color: #666; font-size: 12px; }
        .cliente-box { background: #f8f9fa; padding: 15px; border-radius: 5px; margin-bottom: 20px; border: 1px solid #ddd; }
        table { width: 100%; border-collapse: collapse; }
        th { background: #0d6efd; color: white; padding: 10px; text-align: left; font-size: 13px; }
        td { padding: 10px; border-bottom: 1px solid #eee; font-size: 13px; }
        .total { text-align: right; margin-top: 30px; font-size: 20px; font-weight: bold; color: #198754; }
        .info-adicional { margin-top: 40px; font-size: 12px; line-height: 1.6; }
        .footer { margin-top: 50px; font-size: 10px; color: #999; text-align: center; }
    </style>
</head>
<body>
    <div class="header">
        <div class="orcamento-id">
            <strong>ORÇAMENTO Nº:</strong> {{ orcamento_id }}<br>
            <strong>DATA:</strong> {{ data_emissao }}
        </div>
        {% if empresa.logo_base64 %}
            <img src="{{ empresa.logo_base64 }}" class="logo">
        {% endif %}
        <h2 style="margin: 5px 0; color: #0d6efd;">{{ empresa.nome_empresa }}</h2>
    </div>

    <div class="cliente-box">
        <strong>CLIENTE:</strong> {{ cliente.nome }}<br>
        <strong>TELEFONE:</strong> {{ cliente.telefone | default('Não informado') }}<br>
        <strong>ENDEREÇO:</strong> {{ cliente.endereco }}, {{ cliente.numero }} - {{ cliente.bairro }}
    </div>

    <table>
        <thead>
            <tr>
                <th>SERVIÇO</th>
                <th>QTD</th>
                <th style="text-align: right;">UNITÁRIO</th>
                <th style="text-align: right;">SUBTOTAL</th>
            </tr>
        </thead>
        <tbody>
            {% for item in itens %}
            <tr>
                <td>{{ item.nome }} <br><small style="color: #777;">{{ item.categoria }}</small></td>
                <td>{{ item.qtd }}</td>
                <td style="text-align: right;">R$ {{ "%.2f"|format(item.unit) }}</td>
                <td style="text-align: right;">R$ {{ "%.2f"|format(item.sub) }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div class="total">TOTAL: R$ {{ "%.2f"|format(total) }}</div>

    <div class="info-adicional">
        <strong>FORMA DE PAGAMENTO:</strong> {{ forma_pagamento }}<br>
        <strong>VALIDADE DA PROPOSTA:</strong> {{ validade }} dias<br>
        <p style="margin-top: 10px;">* Este documento é uma estimativa de valores. O serviço será iniciado após aprovação formal do cliente.</p>
    </div>

    <div class="footer">
        Gerado por {{ empresa.nome_empresa }} - Sistema de Gestão de Limpeza
    </div>
</body>
</html>